logLevel: warn

database:
  evmJsonRpcCache:
    connectors:
      - id: memory-cache
        driver: memory
        memory:
          maxItems: 100000
      - id: redis-cache
        driver: redis
        redis:
          addr: redis:6379
          password: "${ERPC_REDIS_PASSWORD}"
          db: 0
          connPoolSize: 128
          initTimeout: 5s
          getTimeout: 1s
          setTimeout: 2s
    policies:
      - network: "*"
        method: "*"
        empty: allow
        finality: finalized
        connector: redis-cache
        ttl: 0
      - network: "*"
        method: "*"
        finality: realtime
        empty: allow
        connector: memory-cache
        ttl: 1s

projects:
  - id: main
    rateLimitBudget: rate-limit
    upstreams:
      - id: alchemy
        endpoint: alchemy://${ERPC_ALCHEMY_KEY}
      - id: drpc
        endpoint: drpc://${ERPC_DRPC_KEY}
      - id: hyperdx
        endpoint: envio://rpc.hypersync.xyz
      - id: drpc-eth-public
        endpoint: https://eth.drpc.org
      - id: drpc-arb-public
        endpoint: https://arbitrum.drpc.org
      - id: drpc-op-public
        endpoint: https://optimism.drpc.org
      - id: drpc-poly-public
        endpoint: https://polygon.drpc.org
      - id: drpc-ava-public
        endpoint: https://avalanche.drpc.org

rateLimiters:
  budgets:
    - id: rate-limit
      rules:
        - method: "*"
          maxCount: 10
          period: 1s
