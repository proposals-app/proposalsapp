{
  "providers": [],
  "buildImage": "ghcr.io/railwayapp/nixpacks:ubuntu-1707782610",
  "variables": {
    "NIXPACKS_METADATA": "rust"
  },
  "phases": {
    "build": {
      "dependsOn": ["setup"],
      "cmds": [
        "mkdir -p bin",
        "cargo build --release --package proposals_consumer --target aarch64-unknown-linux-musl",
        "cp target/aarch64-unknown-linux-musl/release/proposals_consumer bin"
      ],
      "cacheDirectories": ["/root/.cargo/git", "/root/.cargo/registry"]
    },
    "setup": {
      "nixPkgs": [
        "binutils",
        "gcc",
        "(rust-bin.stable.latest.default.override { targets = [\"aarch64-unknown-linux-musl\"]; })",
        "musl",
        "musl.dev"
      ],
      "nixOverlays": ["https://github.com/oxalica/rust-overlay/archive/master.tar.gz"],
      "nixpkgsArchive": "5148520bfab61f99fd25fb9ff7bfbb50dad3c9db"
    }
  },
  "start": {
    "cmd": "./bin/proposals_consumer",
    "runImage": "ubuntu:jammy",
    "onlyIncludeFiles": ["./bin/proposals_consumer"]
  }
}
